---
title: 编程珠玑
date: 2021-11-21 00:00 
tags:
    - 算法
---

## 一个磁盘文件排序问题
使用位图或位向量来表示集合
- 输入数据限制在较小的范围内
- 数据没有重复
- 对于每条记录而言，除了单一整数，没有其他任何关联数据

位图数据结构：
描述了一个有限定义域内的稠密集合，其中的每一个元素最多出现一次并且没有其他任何数据与该元素相关联，也可以用有限定义域内的键作为一个表项更为复杂的表格都索引

一般原理：
- 正确的问题
- 位图数据结构
- 多趟算法
- 时间-空间折中与双赢：减少程序的空间需求也会减少其运行时间
- 简单的设计：设计师确定其设计已经达到了完美的标准不是不能再增加任何东西，而是不能再减少任何东西


## 啊哈！算法
#### 二分搜索
初始条件：
- 已知一个对象存在于一个给定的范围内
- 一次探测操作可以得知该对象是否低于，高于或等于给定的位置
操作：
- 通过重复探测当前范围的中点来定位对象
- 如果一次探测没有找到该对象，将当前范围减半，然后继续下一次探测
- 当找到所需对象或者范围为空时停止

一个使用场景：程序调试

#### 排序
产生有序的输出，既可以是系统规范要求的一部分，也可以是另一个程序的前期准备工作


#### 标识
使用等价关系来定义类

变位词问题：选择标识和集中具有相同标识的单词

#### 问题定义
定义一个新的基本操作使得问题得到简化

一个操作的输出成为下一个操作的输入


## 数据决定程序结构
用恰当的数据结构来替代复杂的代码，将大程序缩减为小程序
- 使用数组重新编写重复代码
- 封装复杂结构
- 尽可能使用高级工具
- 从数据得出程序的结构

数据的表现形式是程序设计的根本

## 编写正确的程序
代码的开发是自上而下进行的：从一般思想开始，将其完善为独立的代码行
正确性分析则是自下而上进行的：从每个独立的代码行开始，检查它们是如何协同运作并解决问题的

正确性分析：
- 初始化
- 保持
- 终止

程序验证：
- 断言：输入，程序变量和输出之间的关系勾勒出了程序的状态
- 顺序控制结构
- 选择控制结构
- 迭代控制结构
- 函数

契约式编程：
如果再前置条件满足的情况下调用函数，那么函数的执行将确立后置条件。一旦证明函数体具有该性质，在以后的应用中就可以直接使用前置条件和后置条件之间的关系而不再需要考虑其实现。
http://www.nowamagic.net/internet/internet_ContractProgramming.php
https://segmentfault.com/a/1190000007558886

## 编程小事
断言既可以用来指导程序代码的开发，也可以用来判断程序的正确性
将断言插入代码中，以确保程序运行时的行为与我们的理解相一致

## 程序性能分析
不同层面的性能改进：
- 算法和数据结构
- 算法调优
- 数据结构重组
- 代码调优
- 硬件

设计层面：
- 问题定义
- 系统结构
- 算法和数据结构
- 代码调优
- 系统软件
- 硬件

## 粗略估算
基本技巧：
- 两个答案比一个答案好
- 快速检验
- 经验法则
- 实践

Little定律：队列中物体的平均数量为进入速率与平均停留时间的乘积

## 算法设计技术
- 保存状态，避免重复计算
- 将信息预处理至数据结构中
- 分治算法
- 扫描算法
- 累加数组
- 下界

分治算法：要解决规模为n的问题，可递归地解决两个规模近似为n/2的子问题，然后对它们的答案进行合并以得到整个问题的答案

## 代码调优
- 效率的角色
- 度量工具
- 设计层面
- 双刃剑

## 节省空间
稀疏数据结构：使用数组表示所有的列，同时使用链表来表示给定列种的活跃元素

数据空间技术：
- 不存储，重新计算
- 稀疏数据结构
- 数据压缩
- 分配策略
- 垃圾回收

代码空间技术：
- 函数定义
- 解释程序
- 翻译成机器语言


## 应用
- 正确性：循环体执行过程中始终保持不变式为真。形状和顺序性质是另一种不变式：它们是堆数据结构的不变性质
- 抽象性：组件是做什么（用户看到的抽象过程）和如何做（黑盒实现）的区别。黑盒有两种不同方式进行打包：过程抽象和抽象数据类型

## 算法分类
排序
- 问题定义：输出序列是输入序列的一个有序排列
- 应用：得到有序的输出，收集相同的项，其他应用
- 通用函数：插入排序，快速排序，堆排序，其他排序（比如归并排序）
- 专用函数：基数排序，位图排序，其他排序（比如多遍排序多次读取输入文件，用时间换取空间）

搜索
- 问题定义：搜索函数判断其输入是否为给定集合和成员，可能还要检索相关信息
- 应用
- 通用函数：顺序搜索，二分搜索，散列，二分搜索树
- 专用函数：关键字索引，其他方法（比如通过将常用元素保存在高速缓存中来减少搜索时间）

其他集合算法
- 优先级队列：插入任意元素和删除最小元素
- 选择算法

## 代码调优法则
空间换时间法则
- 修改数据结构
- 存储预先计算好的结果
- 高速缓存
- 懒惰求值

时间换空间法则
- 堆积
- 解释程序

循环法则
- 将代码移出循环
- 合并测试条件
- 循环展开
- 删除赋值
- 消除无条件分支
- 循环合并

逻辑法则
- 利用等价的代数表达式
- 短路单调函数
- 对测试条件重新排序
- 预先计算逻辑函数
- 消除布尔变量

过程法则
- 打破函数层次
- 高效处理常见情况
- 协同程序
- 递归函数转换
- 并行性

表达式法则
- 编译时初始化
- 利用等价的代数表达式
- 消除公共子表达式
- 成对计算
- 利用计算机的并行性

