---
title: 深入理解计算机系统
tags:
    - 计算机基础
---

封装性：在某一范围内，数据与该数据的操作。
面向对象：将数据和对该数据的操作封装在一起，是封装性的应用。
对象的使用者关注的是对象内部的数据及对数据的操作，该对象内部的数据操作关注的应当是该对象的数据。
即，对象数据应当仅能读取，对象数据的操作应当由对象对外暴露的方法来进行，而对象对外暴露的方法仅应当改变对象数据，而不应当对方法入参做任何更改。
domainModel：属性作为数据，对外暴露对属性的操作
domainService：repository作为数据，可理解为一个数据仓库，比如内存中的一个List。对外暴露的方法，没有改变入参，改变的是数据仓库的状态。
applicationService：domainService作为数据，进行编排操作，通过domainService的对外暴露方法对数据仓库的操作，读取数据仓库的值。但通常出于性能或者操作上的考虑，只拿到所需的部分数据，而不是整个数据仓库的值。
controller：applicationService作为数据，但其实就是applicationService的一层简单包装，目的是将入参和出参根据约定的规则（比如：网络协议，框架对接）进行装换。

局部性：具有良好局部性的程序倾向于一次又一次地访问相同的数据项集合。
封装良好的代码，天然具有良好的局部性。
在性能优化上更加容易，关注点集中，以及范围可控。

避免不必要的函数引用，操作的封装需要克制，函数作为一组操作的基本单位，隐藏了内部细节，但这组操作细节在哪个流程中被关注，就应该透明在哪个流程中。
函数应该是有完整含义的一组数据操作的集合。

任务定义与性能优化，完成任务的清晰性与提高性能的操作不应当混在一起，有关性能优化的操作应当被包装起来，而不是更改整个任务流程。

流水线：预操作指令
带反馈的流水线，根据上一条指令的结果，判断可能执行的下一条指令，如果预测失败，该预测的一系列指令作废。
流水线本身就是一个缓存策略。

权衡，性能与准确性，以及搞砸了付出的代价是否在可接受范围内。
