正在学习 linux，记录一下学习历程。

## 什么是 sell

shell 是一个程序，充当用户界面和脚本解释器，允许用户输入命令以及间接地访问内核的服务。

精通正在使用的 shell 比花大量的时间试图选择一个‘正确’的 shell 更重要。

“如果不能使用自己喜欢的 shell，那么就喜欢正在使用的 shell”--Harley Hahn

## 查看 shell

查看系统上安装了哪些 shell：

```
less /etc/shells
```

查看当前使用的 shell：

```
echo $SHELL
```

## bash

最流行的 shell。

扩展了 Bourne shell 的功能，不仅是一个拥有强大脚本语言的命令处理器，而且还支持命令行编辑，命令历史，目录栈，目录自动补全，及其他特性。

ps：bash 表示“Bourne-again shell”，还是一个双关语，基于 shell 的复兴“born again”版本。

## 临时改变 shell

输入 shell 名，就可以停止当前的 shell，并启动新的 shell。
ps：当结束工作会话时，必须不断退出当前 shell，原路返回到登录 shell 才能注销

## 改变登录 shell

如：改变登录 shell 为 tsch

```
chsh -s /bin/tsch
```

下一次登录系统时生效。

## 交互式 shell 与非交互式 shell

交互式 shell：

shell 充当用户界面。当见到 shell 提示时，输入命令，然后 shell 处理命令，处理完成后，shell 显示提示。

非交互式 shell：

shell 充当脚本解释器。创建一组命令（称为 shell 脚本），保存在一个文件中（以.sh 结尾），shell 从文件中读取命令，并运行。

```
bash test.sh
```

## 子 shell

#### 进程

进程：加载到内存中并且准备运行的程序，以及程序的数据和跟踪程序所需信息。

当进程需要启动另一个进程时，这个进程就创建一个副本进程。

父进程：原始的进程。

子进程：副本进程。

子进程开始运行后，父进程等待子进程死亡（也就是结束）。

一旦子进程死亡，父进程就会被唤醒，重新获得控制权并再次开始运行，此时子进程消失。

#### shell 运行命令
输入命令时，shell 解析命令，判断这条命令时内部命令（shell 中内置的命令）还是外部命令（单独的程序）。

若是内部命令，shell 就会在自己的进程中直接解释命令（不需要创建新的进程）。

若是外部命令，shell 查找合适的程序，然后以一个新进程运行这个程序。当该程序终止时，shell 重新获得控制权，并等待输入令一条命令。其中，shell 是父进程，shell 运行的程序是子进程。

#### 启动新 shell
原始 shell（父进程）启动一个新 shell（子进程）。

现在输入的所有命令都由子 shell 解释，结束子 shell 后，父 shell 重新获得控制权。

创建子 shell 时，它会继承父 shell 的环境。但是子 shell 对环境的任何改变都不会传递回父 shell。

也就是说，在子 shell 中，可以按照自己的意愿做任何事情，而不影响父 shell。

启用新 shell 方式：

1. 直接启用，输入 bash，csh 等。

2. 间接启用，将一组命令括在圆括号中，如(date)。不用关心新 shell 的启动和终止，这些会自动完成。
