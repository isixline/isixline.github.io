<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Bean Validation - undefined
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.4.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> sometimes codeï¼Œ sometimes design </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>isixline</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>å…³äº</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>æœç´¢</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">å¼•å…¥ä¾èµ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-text">ä¸€äº›å¸¸ç”¨æ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%AA%8C%E8%AF%81%E6%B3%A8%E8%A7%A3"><span class="toc-text">è‡ªå®šä¹‰éªŒè¯æ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E9%AA%8C%E8%AF%81"><span class="toc-text">å¼€å¯éªŒè¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Validated%E5%92%8C-Valid"><span class="toc-text">@Validatedå’Œ@Valid</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9RequestBody%E9%AA%8C%E8%AF%81"><span class="toc-text">å¯¹RequestBodyéªŒè¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9RequestParam%E9%AA%8C%E8%AF%81"><span class="toc-text">å¯¹RequestParaméªŒè¯</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E5%BC%82%E5%B8%B8"><span class="toc-text">æ•è·å¼‚å¸¸</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">æœç´¢</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> sometimes codeï¼Œ sometimes design </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Bean Validation
    </div>

    <div class="post-meta">
        <span class="attr">å‘å¸ƒäºï¼š<span>2021-10-01 00:00:00</span></span>
        
        <span class="attr">æ ‡ç­¾ï¼š/
        
        <a class="tag" href="/tags/#java" title="java">java</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">è®¿é—®ï¼š<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ˜¯ä»€ä¹ˆ"></a>æ˜¯ä»€ä¹ˆ</h2><p>å…ˆçœ‹ä¸€æ®µä»£ç ï¼Œåœ¨ä¸šåŠ¡ä¸­ç»å¸¸ä¼šæœ‰å¯¹è¯·æ±‚å€¼çš„æ ¡éªŒï¼Œæœ€ç›´æ¥çš„æ–¹å¼ï¼Œifå †é«˜é«˜ï¼Œä¸€ä¸ªä¸ªå‚æ•°è¿›è¡Œæ ¡éªŒã€‚<br>å¯ä»¥æ»¡è¶³éœ€è¦ï¼Œä½†æ˜¯ä¸å¤Ÿä¼˜é›…ç®€æ´ï¼Œä¹Ÿéš¾ä»¥ç»Ÿä¸€ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserCreateRequest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">validate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.email == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> xxxx;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.name == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> xxxx;</span><br><span class="line">        &#125;</span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bean Validationå°±å®šä¹‰äº†ä¸€å¥—è§„èŒƒï¼Œæ˜¯ä¸€å¥—åŸºäºæ³¨è§£çš„æ•°æ®æ ¡éªŒè§„èŒƒï¼Œå®šä¹‰äº†ç”¨äºJavaBeanéªŒè¯çš„å…ƒæ•°æ®æ¨¡å‹å’ŒAPIã€‚ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserCreateRequest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotEmpty</span></span><br><span class="line">    <span class="meta">@GeneralEmail</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h2><p>å¦‚æœspring-bootç‰ˆæœ¬å°äº2.3.xï¼Œspring-boot-starter-webä¼šè‡ªåŠ¨ä¼ å…¥hibernate-validatorä¾èµ–ã€‚<br>å¦‚æœspring-bootç‰ˆæœ¬å¤§äº2.3.xï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¼•å…¥ä¾èµ–ï¼šorg.springframework.boot:spring-boot-starter-validationã€‚<br>spring-boot-starter-validationæ˜¯å¯¹hibernate-validationçš„äºŒæ¬¡å°è£…ï¼Œ è€Œhibernate-validationæ˜¯å¯¹è¯¥è§„èŒƒçš„å®ç°ï¼Œå¹¶å¢åŠ äº†@Emailã€@Lengthç­‰æ³¨è§£ã€‚</p>
<h2 id="ä¸€äº›å¸¸ç”¨æ³¨è§£"><a href="#ä¸€äº›å¸¸ç”¨æ³¨è§£" class="headerlink" title="ä¸€äº›å¸¸ç”¨æ³¨è§£"></a>ä¸€äº›å¸¸ç”¨æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NotNull</span> <span class="comment">// ä¸ä¸ºnull</span></span><br><span class="line"><span class="meta">@NotEmpty</span> <span class="comment">// Stringã€Collectionã€Mapï¼Œä¸ä¸ºnullï¼Œå¹¶ä¸”é•¿åº¦å¤§äº0</span></span><br><span class="line"><span class="meta">@NotBlank</span> <span class="comment">// Stringä¸ä¸ºnullï¼Œå¹¶ä¸”trimåé•¿åº¦å¤§äº0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Size(min = x, max = x)</span> <span class="comment">// Stringã€Collectionã€Mapï¼Œé•¿åº¦åœ¨minå’ŒmaxèŒƒå›´å†…</span></span><br><span class="line"><span class="meta">@Length(min = x, max = x)</span> <span class="comment">// Stringï¼Œé•¿åº¦åœ¨minå’ŒmaxèŒƒå›´å†…</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Max(value)</span> <span class="comment">// æ•°å­—ã€æ•°å­—æ ¼å¼Stringï¼Œå¤§äºç­‰äºvalue</span></span><br><span class="line"><span class="meta">@Min(value)</span> <span class="comment">// æ•°å­—ã€æ•°å­—æ ¼å¼Stringï¼Œå°äºç­‰äºvalue</span></span><br><span class="line"><span class="meta">@Range(min = x, max = x)</span> <span class="comment">// æ•°å­—ã€æ•°å­—æ ¼å¼Stringï¼Œæ•°å€¼åœ¨minå’ŒmaxèŒƒå›´å†…</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Future</span> <span class="comment">// å°†æ¥æŸä¸ªæ—¥æœŸ</span></span><br><span class="line"><span class="meta">@Past</span> <span class="comment">// è¿‡å»æŸä¸ªæ—¥æœŸ</span></span><br><span class="line"><span class="meta">@PastOrPresent</span> <span class="comment">// è¿‡å»åŠç°åœ¨æŸä¸ªæ—¥æœŸ</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Pattern</span> <span class="comment">// æ»¡è¶³ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="meta">@Email</span> <span class="comment">// æ»¡è¶³Emailæ ¼å¼</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@AssertFalse</span> <span class="comment">// æ‰€æ³¨è§£çš„å…ƒç´ å¿…é¡»æ˜¯Booleanç±»å‹ï¼Œä¸”å€¼ä¸ºfalse</span></span><br><span class="line"><span class="meta">@AssertTrue</span> <span class="comment">// æ‰€æ³¨è§£çš„å…ƒç´ å¿…é¡»æ˜¯Booleanç±»å‹ï¼Œä¸”å€¼ä¸ºtrue</span></span><br><span class="line"><span class="meta">@Null</span> <span class="comment">// æ‰€æ³¨è§£çš„å…ƒç´ å€¼ä¸ºnull</span></span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰éªŒè¯æ³¨è§£"><a href="#è‡ªå®šä¹‰éªŒè¯æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰éªŒè¯æ³¨è§£"></a>è‡ªå®šä¹‰éªŒè¯æ³¨è§£</h2><p>è¿™é‡Œä¸¾ä¸ªğŸŒ°ï¼Œ@AccountNameä¸ºéªŒè¯ä¸ºphoneæˆ–è€…emailæ ¼å¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = AccountNameValidator.class)</span></span><br><span class="line"><span class="meta">@Target(&#123;FIELD, PARAMETER&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AccountName &#123;</span><br><span class="line">    <span class="function">String <span class="title">message</span><span class="params">()</span> <span class="keyword">default</span> &quot;Invalid account name&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountNameValidator</span> <span class="keyword">implements</span> <span class="title">ConstraintValidator</span>&lt;<span class="title">AccountName</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String accountName, ConstraintValidatorContext context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> GeneralEmailValidator.valid(accountName) || PhoneValidator.valid(accountName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¼€å¯éªŒè¯"><a href="#å¼€å¯éªŒè¯" class="headerlink" title="å¼€å¯éªŒè¯"></a>å¼€å¯éªŒè¯</h2><h4 id="Validatedå’Œ-Valid"><a href="#Validatedå’Œ-Valid" class="headerlink" title="@Validatedå’Œ@Valid"></a>@Validatedå’Œ@Valid</h4><p>@Validatedæ˜¯@Validçš„å˜ä½“<br>å…ˆè¯´@Validï¼Œå®ƒæ ‡è®°æ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›å€¼åŠå…¶ä¸­çš„æˆå‘˜å±æ€§ï¼Œå¹¶çº§è”åœ°è¿›è¡ŒéªŒè¯ï¼Œè¿™æ„å‘³ç€æ¯å½“ä½¿ç”¨å®ƒæ ‡è®°ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°ä¸­çš„å„ä¸ªå±æ€§éƒ½ä¼šè¢«æ ¡éªŒã€‚<br>ç”¨ä¸‹é¢ä»£ç ä¸¾ä¸ªğŸŒ°ï¼Œå½“ä½¿ç”¨@ValidéªŒè¯UserUpdateRequestä½œä¸ºæ–¹æ³•å‚æ•°æ—¶ï¼Œä¼šéªŒè¯UserUpdateRequestä¸­çš„nameå’Œaddressï¼Œç„¶åçº§è”éªŒè¯Addressä¸­çš„provinceå’Œcity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserUpdateRequest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@Valid</span> </span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">        <span class="meta">@NotBlank</span></span><br><span class="line">        <span class="keyword">private</span> String province;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@NotBlank</span></span><br><span class="line">        <span class="keyword">private</span> String city;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†è¯´@Validatedï¼Œå’Œ@Validä½¿ç”¨ä¸Šå·®ä¸å¤šï¼Œä½†æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>ä¸èƒ½ç”¨åœ¨æˆå‘˜å±æ€§ä¸Š</li>
<li>æä¾›äº†ä¸€ä¸ªåˆ†ç»„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨å…¥å‚éªŒè¯æ—¶ï¼Œæ ¹æ®ä¸åŒçš„åˆ†ç»„é‡‡ç”¨ä¸åŒçš„éªŒè¯æœºåˆ¶</li>
</ul>
<h4 id="å¯¹RequestBodyéªŒè¯"><a href="#å¯¹RequestBodyéªŒè¯" class="headerlink" title="å¯¹RequestBodyéªŒè¯"></a>å¯¹RequestBodyéªŒè¯</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> UserCreateResponse <span class="title">createUser</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> UserCreateRequest request)</span></span>&#123;</span><br><span class="line">      <span class="comment">// xxxx</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> UserCreateResponse <span class="title">createUser</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Validated</span> UserCreateRequest request)</span></span>&#123;</span><br><span class="line">      <span class="comment">// xxxx</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¯¹RequestParaméªŒè¯"><a href="#å¯¹RequestParaméªŒè¯" class="headerlink" title="å¯¹RequestParaméªŒè¯"></a>å¯¹RequestParaméªŒè¯</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserManagementController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Page&lt;QueryUserResponse&gt; <span class="title">query</span><span class="params">(<span class="meta">@RequestParam(required = false)</span> <span class="meta">@NotBlank</span> String keyword,</span></span></span><br><span class="line"><span class="params"><span class="function">                                         Pageable pageable)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// xxxx</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸ªæœ‰è¶£çš„åœ°æ–¹ï¼Œä¸ºä»€ä¹ˆä¸å¯ä»¥ç›´æ¥åœ¨æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨@Validæˆ–@Validatedï¼Œè€Œæ˜¯è¦åœ¨ç±»ä¸Šä½¿ç”¨@Validatedï¼Ÿ </p>
<p>è‹¥ç›´æ¥åœ¨æ–¹æ³•å‚æ•°ä¸Šä½¿ç”¨@Validæˆ–@Validatedï¼Œé‚£ä¹ˆä¼šéªŒè¯è¯¥å‚æ•°çš„å†…éƒ¨å±æ€§ï¼Œè€Œä¸ä¼šå…³å¿ƒéªŒè¯è¯¥å‚æ•°è¢«è¡¨ç¤ºæ ‡è¯†çš„éªŒè¯ã€‚<br>è€Œ@Validatedæœ‰ä¸ªç‰¹åˆ«çš„åœ°æ–¹ï¼Œå½“è¢«æ”¾åœ¨spring beançš„ç±»ä¸Šï¼Œspringä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªåˆ‡é¢ä»£ç†ï¼Œå¯¹äºå…¶æ‰€æœ‰çš„publicæ–¹æ³•ï¼Œå¦‚æœæ–¹æ³•æœ‰å£°æ˜éœ€è¦éªŒè¯çš„å‚æ•°ï¼Œåˆ™è¿›è¡ŒéªŒè¯ã€‚<br>å¦å¤–ï¼Œ@Validatedä¹Ÿå¯ä»¥æ”¾åˆ°æ–¹æ³•ä¸Šï¼Œä½†æ²¡æœ‰åˆ›å»ºåˆ‡é¢çš„åŠŸèƒ½ï¼Œä»…ä»…æ˜¯ç”¨æ¥å£°æ˜è¯¥æ–¹æ³•æ‰€æœ‰çš„éœ€è¦éªŒè¯çš„å‚æ•°é€‚ç”¨çš„groupï¼Œå¹¶è¦†ç›–ç±»ä¸Šæä¾›çš„åˆ†ç»„ã€‚  </p>
<h2 id="æ•è·å¼‚å¸¸"><a href="#æ•è·å¼‚å¸¸" class="headerlink" title="æ•è·å¼‚å¸¸"></a>æ•è·å¼‚å¸¸</h2><p>æœ€åï¼Œæˆ‘ä»¬å†æ”¶ä¸ªå°¾ï¼Œå°†æ•°æ®æ ¡éªŒæŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œè¿”å›ç»™å‰ç«¯ç®€å•æ¸…æ™°å¤Ÿç”¨çš„è¿”å›å€¼å³å¯ã€‚<br>å¼‚å¸¸responseçš„è¿”å›æ ¼å¼ä¸å‰ç«¯è¾¾æˆä¸€è‡´å°±å¥½ï¼Œè¿™é‡Œæä¾›ä¸€ç§ç®€å•çš„è¿”å›æ ¼å¼ä¾›å‚è€ƒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, List&lt;String&gt;&gt;&gt;handleMethodArgumentNotValidException(MethodArgumentNotValidException e)&#123;</span><br><span class="line">        List&lt;String&gt; fieldErrors=e.getBindingResult().getFieldErrors().stream()</span><br><span class="line">        .map(fieldError-&gt;fieldError.getField()+<span class="string">&quot; &quot;</span>+fieldError.getDefaultMessage())</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt;map=<span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;errors&quot;</span>,fieldErrors);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(map);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ExceptionHandler(ConstraintViolationException.class)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, List&lt;String&gt;&gt;&gt; handleConstraintViolationException(ConstraintViolationException e) &#123;</span><br><span class="line">        List&lt;String&gt; errors = e.getConstraintViolations().stream()</span><br><span class="line">        .map(constraintViolation -&gt; constraintViolation.getPropertyPath() + constraintViolation.getMessage())</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;errors&quot;</span>, errors);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(map);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
